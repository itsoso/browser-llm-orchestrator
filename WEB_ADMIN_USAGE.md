# Web ç®¡ç†ç•Œé¢ä½¿ç”¨æŒ‡å—

Browser LLM Orchestrator æä¾›äº†ä¸€ä¸ªç°ä»£åŒ–çš„ Web ç®¡ç†ç•Œé¢ï¼Œè®©ä½ å¯ä»¥é€šè¿‡æµè§ˆå™¨è½»æ¾ç®¡ç†å’Œæ“ä½œæ•´ä¸ªç³»ç»Ÿã€‚

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 2. å¯åŠ¨ Web ç®¡ç†ç•Œé¢

```bash
python web_admin.py
```

**é»˜è®¤è®¿é—®åœ°å€**: http://127.0.0.1:5050

**è‡ªå®šä¹‰ç«¯å£**:
```bash
WEB_ADMIN_PORT=8080 python web_admin.py
```

---

## ğŸ“Š åŠŸèƒ½æ¦‚è§ˆ

### ğŸŸ¢ ç³»ç»ŸçŠ¶æ€é¢æ¿

å®æ—¶æ˜¾ç¤ºç³»ç»Ÿè¿è¡ŒçŠ¶æ€ï¼š
- **Driver Server çŠ¶æ€**: è¿è¡Œ/åœæ­¢ã€è¿æ¥ç«™ç‚¹ã€å¥åº·æ£€æŸ¥
- **é…ç½®ä¿¡æ¯**: å½“å‰å¯ç”¨çš„ç«™ç‚¹ã€è¾“å‡ºç›®å½•
- **ä¸€é”®æ“ä½œ**: å¯åŠ¨/åœæ­¢ Driver Server

### ğŸ”¥ ç«™ç‚¹é¢„çƒ­ (Warmup Tab)

é¦–æ¬¡ä½¿ç”¨å‰ï¼Œéœ€è¦é¢„çƒ­å„ä¸ªç«™ç‚¹å¹¶æ‰‹åŠ¨ç™»å½•ä¿å­˜ Sessionï¼š

**æ”¯æŒçš„ç«™ç‚¹**:
- ChatGPT
- Gemini
- Grok
- Perplexity
- é€šä¹‰åƒé—® (Qianwen)

**æ“ä½œæ­¥éª¤**:
1. ç‚¹å‡»ç«™ç‚¹æŒ‰é’®ï¼ˆå¦‚ "ChatGPT"ï¼‰
2. ç­‰å¾…æµè§ˆå™¨çª—å£æ‰“å¼€
3. åœ¨æµè§ˆå™¨ä¸­æ‰‹åŠ¨ç™»å½•
4. ç™»å½•æˆåŠŸåï¼ŒSession ä¼šè‡ªåŠ¨ä¿å­˜åˆ° `profiles/` ç›®å½•
5. å…³é—­æµè§ˆå™¨çª—å£
6. æŸ¥çœ‹ Web ç•Œé¢çš„è¾“å‡ºæ—¥å¿—ç¡®è®¤æˆåŠŸ

### ğŸ’¬ Chatlog è‡ªåŠ¨åŒ– (Chatlog Tab)

é€šè¿‡å¯è§†åŒ–è¡¨å•è½»æ¾é…ç½®å’Œæ‰§è¡Œç¾¤èŠåˆ†æï¼š

**å¿…å¡«å‚æ•°**:
- **ç¾¤èŠæ ‡è¯†**: ä¾‹å¦‚ `xxç¾¤-2025`
- **å¼€å§‹æ—¥æœŸ**: åˆ†æèµ·å§‹æ—¥æœŸ
- **ç»“æŸæ—¥æœŸ**: åˆ†æç»“æŸæ—¥æœŸ

**å¯é€‰å‚æ•°**:
- **æ¨¡å‹ç‰ˆæœ¬**: 
  - `5.2pro` - **ChatGPT 5.2 Pro**ï¼ˆæ·±åº¦æ¨ç†ï¼Œ20-30åˆ†é’Ÿï¼Œæœ€æ·±å…¥çš„åˆ†æï¼‰âœ¨ æ¨è
  - `5.2thinking` - **ChatGPT 5.2 Thinking**ï¼ˆå¹³è¡¡æ¨¡å¼ï¼Œ10-15åˆ†é’Ÿï¼Œä¸€èˆ¬åˆ†æä»»åŠ¡ï¼‰
  - `5.2instant` - **ChatGPT 5.2 Instant**ï¼ˆå¿«é€Ÿå“åº”ï¼Œ2-5åˆ†é’Ÿï¼Œç®€å•æ€»ç»“ä»»åŠ¡ï¼‰
- **æ¨¡æ¿è·¯å¾„**: è‡ªå®šä¹‰åˆ†ææ¨¡æ¿ï¼ˆé»˜è®¤ä½¿ç”¨ `templates/chatlog_for_wechat.md`ï¼‰
- **æ¯æ¬¡æ‰“å¼€æ–°å¯¹è¯çª—å£**: é¿å…ä¸Šä¸‹æ–‡æ±¡æŸ“ï¼ˆæ¨èå¼€å¯ï¼‰

**æ‰§è¡Œæµç¨‹**:
1. å¡«å†™è¡¨å•å‚æ•°
2. ç‚¹å‡» "ğŸš€ å¼€å§‹åˆ†æ"
3. ç³»ç»Ÿåœ¨åå°å¯åŠ¨åˆ†æä»»åŠ¡
4. è‡ªåŠ¨è·³è½¬åˆ°æ—¥å¿—æŸ¥çœ‹é¡µé¢
5. å®æ—¶æŸ¥çœ‹æ‰§è¡Œæ—¥å¿—
6. å®Œæˆååœ¨ Obsidian ä¸­æŸ¥çœ‹ç»“æœ

**è¾“å‡ºä½ç½®**:
- **Raw æ–‡ä»¶**: `obsidian/10_Sources/WeChat/00-raws/`
- **Summary æ–‡ä»¶**: `obsidian/10_Sources/WeChat/10-Summaries/`

### ğŸ“ æ—¥å¿—æŸ¥çœ‹ (Logs Tab)

å®æ—¶æŸ¥çœ‹å„ç±»æ—¥å¿—ï¼š

**æ—¥å¿—ç±»å‹**:
- **Driver Server**: Driver Server è¿è¡Œæ—¥å¿—
- **Chatlog è‡ªåŠ¨åŒ–**: å‘½ä»¤è¡Œè§¦å‘çš„ Chatlog ä»»åŠ¡æ—¥å¿—
- **Web è§¦å‘çš„ Chatlog**: Web ç•Œé¢è§¦å‘çš„ Chatlog ä»»åŠ¡æ—¥å¿—

**æ“ä½œ**:
1. é€‰æ‹©æ—¥å¿—ç±»å‹
2. ä»ä¸‹æ‹‰åˆ—è¡¨é€‰æ‹©æ—¥å¿—æ–‡ä»¶ï¼ˆæŒ‰ä¿®æ”¹æ—¶é—´æ’åºï¼‰
3. æŸ¥çœ‹æ—¥å¿—å†…å®¹ï¼ˆæ˜¾ç¤ºæœ€å 1000 è¡Œï¼‰
4. æ—¥å¿—è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨

**æ—¥å¿—ä½ç½®**: `logs/` ç›®å½•

### âš™ï¸ é…ç½®ç®¡ç† (Config Tab)

æŸ¥çœ‹ç³»ç»Ÿé…ç½®æ–‡ä»¶ï¼š

**å¯æŸ¥çœ‹çš„é…ç½®**:
- `brief.yaml` - ä¸»é…ç½®æ–‡ä»¶ï¼ˆç«™ç‚¹ã€æ¨¡å‹ã€è¾“å‡ºè·¯å¾„ç­‰ï¼‰
- `chatlog_automation.yaml` - Chatlog è‡ªåŠ¨åŒ–é…ç½®

**æ“ä½œ**:
- ç‚¹å‡» "ğŸ”„ åˆ·æ–°" é‡æ–°åŠ è½½é…ç½®
- é…ç½®ä»¥ JSON æ ¼å¼ç¾åŒ–æ˜¾ç¤º

---

## ğŸ¨ ç•Œé¢é¢„è§ˆ

### ç³»ç»ŸçŠ¶æ€é¢æ¿
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“Š ç³»ç»ŸçŠ¶æ€                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸŸ¢ Driver Server: è¿è¡Œä¸­                â”‚
â”‚    ç«™ç‚¹: chatgpt, gemini                â”‚
â”‚    URL: http://127.0.0.1:27125          â”‚
â”‚                                         â”‚
â”‚ [â–¶ï¸ å¯åŠ¨] [â¹ï¸ åœæ­¢]                     â”‚
â”‚                                         â”‚
â”‚ âš™ï¸ é…ç½®ä¿¡æ¯                              â”‚
â”‚    ç«™ç‚¹: chatgpt, gemini                â”‚
â”‚    è¾“å‡ºç›®å½•: runs                        â”‚
â”‚    æœ€åæ›´æ–°: 2026-01-07 20:00:00        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Tab å¯¼èˆª
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ğŸ”¥ ç«™ç‚¹é¢„çƒ­] [ğŸ’¬ Chatlog è‡ªåŠ¨åŒ–]        â”‚
â”‚ [ğŸ“ æ—¥å¿—æŸ¥çœ‹] [âš™ï¸ é…ç½®ç®¡ç†]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¡ ä½¿ç”¨æŠ€å·§

### 1. é¦–æ¬¡ä½¿ç”¨æµç¨‹

```mermaid
graph LR
    A[å¯åŠ¨ Web ç•Œé¢] --> B[ç«™ç‚¹é¢„çƒ­]
    B --> C[æ‰‹åŠ¨ç™»å½•å„ç«™ç‚¹]
    C --> D[å¯åŠ¨ Driver Server]
    D --> E[æ‰§è¡Œ Chatlog åˆ†æ]
```

**å‘½ä»¤è¡Œç‰ˆæœ¬**:
```bash
# 1. å¯åŠ¨ Web ç•Œé¢
python web_admin.py

# 2. åœ¨æµè§ˆå™¨ä¸­è®¿é—® http://127.0.0.1:5050

# 3. åœ¨ "ç«™ç‚¹é¢„çƒ­" Tab ä¸­é¢„çƒ­æ‰€æœ‰ç«™ç‚¹

# 4. åœ¨ "ç³»ç»ŸçŠ¶æ€" é¢æ¿ä¸­å¯åŠ¨ Driver Server

# 5. åœ¨ "Chatlog è‡ªåŠ¨åŒ–" Tab ä¸­æ‰§è¡Œåˆ†æä»»åŠ¡
```

### 2. æ—¥å¸¸ä½¿ç”¨æµç¨‹

å¦‚æœå·²ç»å®Œæˆäº†ç«™ç‚¹é¢„çƒ­ï¼ˆSession å·²ä¿å­˜ï¼‰ï¼Œæ—¥å¸¸ä½¿ç”¨æ›´ç®€å•ï¼š

```bash
# 1. å¯åŠ¨ Web ç•Œé¢
python web_admin.py

# 2. ç¡®è®¤ Driver Server è¿è¡Œï¼ˆç³»ç»Ÿä¼šè‡ªåŠ¨æ£€æµ‹ï¼‰

# 3. ç›´æ¥æ‰§è¡Œ Chatlog åˆ†ææˆ–å…¶ä»–æ“ä½œ
```

### 3. åå°è¿è¡Œ

**macOS/Linux**:
```bash
nohup python web_admin.py > web_admin.log 2>&1 &
```

**æŸ¥çœ‹æ—¥å¿—**:
```bash
tail -f web_admin.log
```

**åœæ­¢**:
```bash
# æŸ¥æ‰¾è¿›ç¨‹
ps aux | grep web_admin.py

# æ€æ­»è¿›ç¨‹
kill <PID>
```

### 4. è‡ªåŠ¨åˆ·æ–°

ç³»ç»ŸçŠ¶æ€æ¯ 5 ç§’è‡ªåŠ¨åˆ·æ–°ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œã€‚å¦‚æœéœ€è¦ç«‹å³åˆ·æ–°ï¼Œç‚¹å‡»å³ä¸Šè§’çš„ "ğŸ”„ åˆ·æ–°çŠ¶æ€" æŒ‰é’®ã€‚

---

## ğŸ”§ æ•…éšœæ’æŸ¥

### é—®é¢˜ 1: æ— æ³•å¯åŠ¨ Web ç•Œé¢

**ç—‡çŠ¶**:
```
Address already in use
```

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ–¹æ¡ˆ 1: æ›´æ¢ç«¯å£
WEB_ADMIN_PORT=8080 python web_admin.py

# æ–¹æ¡ˆ 2: æŸ¥æ‰¾å¹¶æ€æ­»å ç”¨è¿›ç¨‹
lsof -i :5050
kill <PID>
```

### é—®é¢˜ 2: Driver Server å¯åŠ¨å¤±è´¥

**ç—‡çŠ¶**:
Web ç•Œé¢æ˜¾ç¤º "Driver Server å¯åŠ¨å¤±è´¥"

**è§£å†³æ–¹æ¡ˆ**:
1. æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ï¼ˆåœ¨ "æ—¥å¿—æŸ¥çœ‹" Tabï¼‰
2. æ£€æŸ¥ `brief.yaml` é…ç½®æ˜¯å¦æ­£ç¡®
3. ç¡®è®¤æµè§ˆå™¨é©±åŠ¨å·²å®‰è£…ï¼š
   ```bash
   playwright install chromium
   ```
4. æ£€æŸ¥ç«¯å£ 27125 æ˜¯å¦è¢«å ç”¨ï¼š
   ```bash
   lsof -i :27125
   ```

### é—®é¢˜ 3: Chatlog åˆ†ææ²¡æœ‰è¾“å‡º

**ç—‡çŠ¶**:
ä»»åŠ¡å¯åŠ¨æˆåŠŸï¼Œä½†æ²¡æœ‰ç”Ÿæˆ Summary æ–‡ä»¶

**è§£å†³æ–¹æ¡ˆ**:
1. åœ¨ "æ—¥å¿—æŸ¥çœ‹" Tab ä¸­æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
2. ç¡®è®¤ Driver Server æ­£åœ¨è¿è¡Œ
3. ç¡®è®¤ Chatlog æœåŠ¡æ­£åœ¨è¿è¡Œï¼š
   ```bash
   curl http://127.0.0.1:5030/health
   ```
4. æ£€æŸ¥ Obsidian vault è·¯å¾„æ˜¯å¦æ­£ç¡®ï¼ˆåœ¨ `chatlog_automation.yaml` ä¸­ï¼‰

### é—®é¢˜ 4: æµè§ˆå™¨æ²¡æœ‰æ‰“å¼€

**ç—‡çŠ¶**:
ç‚¹å‡» "ç«™ç‚¹é¢„çƒ­" åï¼Œæµè§ˆå™¨æ²¡æœ‰æ‰“å¼€

**è§£å†³æ–¹æ¡ˆ**:
1. ç¡®è®¤å·²å®‰è£… Playwright æµè§ˆå™¨é©±åŠ¨ï¼š
   ```bash
   playwright install chromium
   ```
2. æ£€æŸ¥ç³»ç»Ÿæƒé™ï¼ˆmacOS å¯èƒ½éœ€è¦æˆæƒï¼‰
3. æŸ¥çœ‹ Web ç•Œé¢çš„è¾“å‡ºæ—¥å¿—

---

## ğŸŒ API æ¥å£

Web ç®¡ç†ç•Œé¢æä¾›äº† RESTful APIï¼Œå¯ä»¥é€šè¿‡ç¼–ç¨‹æ–¹å¼è°ƒç”¨ï¼š

### ç³»ç»ŸçŠ¶æ€

```bash
curl http://127.0.0.1:5050/api/status
```

### å¯åŠ¨ Driver Server

```bash
curl -X POST http://127.0.0.1:5050/api/driver/start
```

### åœæ­¢ Driver Server

```bash
curl -X POST http://127.0.0.1:5050/api/driver/stop
```

### é¢„çƒ­ç«™ç‚¹

```bash
curl -X POST http://127.0.0.1:5050/api/warmup/chatgpt
```

### è¿è¡Œ Chatlog åˆ†æ

```bash
# ä½¿ç”¨ ChatGPT 5.2 Proï¼ˆæ·±åº¦æ¨ç†ï¼‰
curl -X POST http://127.0.0.1:5050/api/chatlog/run \
  -H "Content-Type: application/json" \
  -d '{
    "talker": "xxç¾¤-2025",
    "start": "2026-01-01",
    "end": "2026-01-07",
    "model_version": "5.2pro",
    "new_chat": true
  }'

# ä½¿ç”¨ ChatGPT 5.2 Thinkingï¼ˆå¹³è¡¡æ¨¡å¼ï¼‰
curl -X POST http://127.0.0.1:5050/api/chatlog/run \
  -H "Content-Type: application/json" \
  -d '{
    "talker": "xxç¾¤-2025",
    "start": "2026-01-01",
    "end": "2026-01-07",
    "model_version": "5.2thinking",
    "new_chat": true
  }'

# ä½¿ç”¨ ChatGPT 5.2 Instantï¼ˆå¿«é€Ÿå“åº”ï¼‰
curl -X POST http://127.0.0.1:5050/api/chatlog/run \
  -H "Content-Type: application/json" \
  -d '{
    "talker": "xxç¾¤-2025",
    "start": "2026-01-01",
    "end": "2026-01-07",
    "model_version": "5.2instant",
    "new_chat": true
  }'
```

### æŸ¥çœ‹æ—¥å¿—

```bash
# è·å–æ—¥å¿—åˆ—è¡¨
curl http://127.0.0.1:5050/api/logs/driver

# æŸ¥çœ‹æ—¥å¿—å†…å®¹
curl http://127.0.0.1:5050/api/logs/view/driver_20260107_200000.log
```

å®Œæ•´çš„ API æ–‡æ¡£è¯·å‚è€ƒ `web_admin.py` æºç ä¸­çš„è·¯ç”±å®šä¹‰ã€‚

---

## ğŸ” å®‰å…¨å»ºè®®

1. **æœ¬åœ°è®¿é—®**: é»˜è®¤åªç»‘å®šåˆ° `127.0.0.1`ï¼Œä»…æœ¬æœºå¯è®¿é—®
2. **å¤–ç½‘è®¿é—®**: å¦‚éœ€å¤–ç½‘è®¿é—®ï¼Œå»ºè®®ï¼š
   - ä½¿ç”¨åå‘ä»£ç†ï¼ˆå¦‚ Nginxï¼‰
   - æ·»åŠ èº«ä»½è®¤è¯ï¼ˆå¦‚ HTTP Basic Authï¼‰
   - ä½¿ç”¨ HTTPS
3. **æ•æ„Ÿæ•°æ®**: é…ç½®æ–‡ä»¶å¯èƒ½åŒ…å«æ•æ„Ÿä¿¡æ¯ï¼Œæ³¨æ„ä¿æŠ¤

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [README.md](./README.md) - é¡¹ç›®æ€»è§ˆ
- [CHATGPT_MODEL_VERSIONS.md](./CHATGPT_MODEL_VERSIONS.md) - **ChatGPT 5.2 æ¨¡å‹ç‰ˆæœ¬è¯¦è§£** â­
- [CLI_USAGE_EXAMPLES.md](./CLI_USAGE_EXAMPLES.md) - å‘½ä»¤è¡Œç”¨æ³•
- [CHATLOG_USAGE_EXAMPLE.md](./CHATLOG_USAGE_EXAMPLE.md) - Chatlog è¯¦ç»†ç¤ºä¾‹
- [DRIVER_HELPER_USAGE.md](./DRIVER_HELPER_USAGE.md) - Driver Server è¾…åŠ©å·¥å…·

---

## ğŸ‰ ä¸‹ä¸€æ­¥

1. **æ¢ç´¢ç•Œé¢**: æµè§ˆå„ä¸ª Tabï¼Œç†Ÿæ‚‰åŠŸèƒ½
2. **é¢„çƒ­ç«™ç‚¹**: å®Œæˆæ‰€æœ‰ç«™ç‚¹çš„é¦–æ¬¡ç™»å½•
3. **æ‰§è¡Œä»»åŠ¡**: å°è¯•è¿è¡Œä¸€æ¬¡ Chatlog åˆ†æ
4. **æŸ¥çœ‹ç»“æœ**: åœ¨ Obsidian ä¸­æŸ¥çœ‹ç”Ÿæˆçš„åˆ†æç»“æœ
5. **è‡ªå®šä¹‰æ¨¡æ¿**: æ ¹æ®éœ€æ±‚ä¿®æ”¹ `templates/chatlog_for_wechat.md`

ç¥ä½¿ç”¨æ„‰å¿«ï¼ğŸŠ

